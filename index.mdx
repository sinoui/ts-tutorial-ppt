import { CodeSurferLayout } from 'code-surfer';
import { Appear } from 'mdx-deck';
export { nightOwlFull as theme } from 'code-surfer/themes';

# TypeScript ç®€æ˜æ•™ç¨‹

---

TypeScript æ˜¯ä»€ä¹ˆï¼Ÿ

## TypeScript æ˜¯ JavaScript + ç±»å‹å£°æ˜ï¼Œå®ƒå¯ä»¥ç¼–è¯‘æˆçº¯ JavaScriptã€‚

![](./img/ts-tutorial-intelli-sense.png)

---

<CodeSurferLayout >

```shell title="å¼€å§‹ä½¿ç”¨ TypeScript"  subtitle="é€šè¿‡ts-lib-scriptsåˆ›å»ºä¸€ä¸ªç”¨æ¥ç»ƒä¹ çš„ TypeScript é¡¹ç›®"

npx ts-lib-scripts create ts-hello-world

```

</CodeSurferLayout>

---

<CodeSurferLayout>

```ts 1,3 title="åŸºç¡€ç±»å‹" subtitle="å¸ƒå°”å€¼"
let isDone: boolean = fasle;

isDone = 2; // Error,ä¸èƒ½å°†ç±»å‹"2"åˆ†é…ç»™ç±»å‹â€œbooleanâ€
```

```ts 1,2,3,4 title="åŸºç¡€ç±»å‹" subtitle="æ•°å­—"
const decLiteral: number = 6;
const hexLiteral: number = 0xf00d;
const binaryLiteral: number = 0b1010;
const octalLiteral: number = 0o744;
```

```ts 1,2 title="åŸºç¡€ç±»å‹" subtitle="å­—ç¬¦ä¸²"
let name: string = 'bob';
name = 'smith';
```

```ts 1 title="åŸºç¡€ç±»å‹" subtitle="æ•°ç»„: å¯ä»¥åœ¨å…ƒç´ ç±»å‹åé¢æ¥ä¸Š[]ï¼Œè¡¨ç¤ºç”±æ­¤ç±»å‹å…ƒç´ ç»„æˆçš„ä¸€ä¸ªæ•°ç»„"
let list: number[] = [1, 2, 3];
```

```ts 1 title="åŸºç¡€ç±»å‹" subtitle="æ•°ç»„: ä½¿ç”¨æ•°ç»„æ³›å‹ï¼ŒArray<å…ƒç´ ç±»å‹>å®šä¹‰"
let list: Array<number> = [1, 2, 3];
```

```ts 2,4,5 title="å…ƒç»„"
// å®šä¹‰å…ƒç¥–ç±»å‹
let x: [string, number];
// åˆå§‹åŒ–
x = ['hello', 10]; // OK
x = [10, 'hello']; // é”™è¯¯ï¼Œç±»å‹ä¸åŒ¹é…
```

```ts 5 title="å…ƒç»„" subtitle="è¾“å‡ºä»€ä¹ˆï¼Ÿ"
let x: [string, number];
x = ['hello', 10]; // OK
x = [10, 'hello']; // é”™è¯¯ï¼Œç±»å‹ä¸åŒ¹é…

console.log(x[0].substr(1));
```

```ts 5 title="å…ƒç»„" subtitle="ello"
let x: [string, number];
x = ['hello', 10]; // OK
x = [10, 'hello']; // é”™è¯¯ï¼Œç±»å‹ä¸åŒ¹é…

console.log(x[0].substr(1));
```

```ts 6 title="å…ƒç»„" subtitle="è¾“å‡ºä»€ä¹ˆï¼Ÿ"
let x: [string, number];
x = ['hello', 10]; // OK
x = [10, 'hello']; // é”™è¯¯ï¼Œç±»å‹ä¸åŒ¹é…

console.log(x[0].substr(1));
console.log(x[1].substr(1));
```

```ts 6 title="å…ƒç»„" subtitle="é”™è¯¯, 'number'ç±»å‹æ²¡æœ‰'substr'æ–¹æ³•"
let x: [string, number];
x = ['hello', 10]; // OK
x = [10, 'hello']; // é”™è¯¯ï¼Œç±»å‹ä¸åŒ¹é…

console.log(x[0].substr(1));
console.log(x[1].substr(1));
```

```ts 1 title="any" subtitle="æœ‰æ—¶å€™ï¼Œæˆ‘ä»¬ä¼šæƒ³è¦ä¸ºé‚£äº›åœ¨ç¼–ç¨‹é˜¶æ®µè¿˜ä¸æ¸…æ¥šç±»å‹çš„å˜é‡æŒ‡å®šä¸€ä¸ªç±»å‹,  æˆ‘ä»¬ä¸å¸Œæœ›ç±»å‹æ£€æŸ¥å™¨å¯¹è¿™äº›å€¼è¿›è¡Œæ£€æŸ¥è€Œæ˜¯ç›´æ¥è®©å®ƒä»¬é€šè¿‡ç¼–è¯‘é˜¶æ®µçš„æ£€æŸ¥,å°±å¯ä»¥æŒ‡å®šany"
let notSure: any = 4;
notSure = 'maybe a string instead';
notSure = false;
```

```ts title="void" subtitle="æŸç§ç¨‹åº¦ä¸Šæ¥è¯´ï¼Œvoidç±»å‹åƒæ˜¯ä¸anyç±»å‹ç›¸åï¼Œå®ƒè¡¨ç¤ºæ²¡æœ‰ä»»ä½•ç±»å‹ã€‚å½“ä¸€ä¸ªå‡½æ•°æ²¡æœ‰è¿”å›å€¼æ—¶ï¼Œæˆ‘ä»¬é€šå¸¸ä¼šæŠŠè¿”å›å€¼çš„ç±»å‹è®¾ä¸ºvoid"
function fn(): void {
  console.log('è¿™æ˜¯ä¸€ä¸ªå‡½æ•°ç±»å‹å£°æ˜');
}
```

```ts title="nullå’Œundefined" subtitle="å’Œvoidç›¸ä¼¼ï¼Œå®ƒä»¬çš„æœ¬èº«çš„ç±»å‹ç”¨å¤„ä¸æ˜¯å¾ˆå¤§ã€‚é»˜è®¤æƒ…å†µä¸‹nullå’Œundefinedæ˜¯æ‰€æœ‰ç±»å‹çš„å­ç±»å‹"
let u: undefined = undefined;
let n: null = null;
```

</CodeSurferLayout>

---

<CodeSurferLayout>

```ts 1,2,3,4,5 title="æšä¸¾" subtitle="ä½¿ç”¨æšä¸¾æˆ‘ä»¬å¯ä»¥å®šä¹‰ä¸€äº›å¸¦åå­—çš„å¸¸é‡ï¼Œå¯ä»¥æ¸…æ™°åœ°è¡¨è¾¾æ„å›¾æˆ–åˆ›å»ºä¸€ç»„æœ‰åŒºåˆ«çš„ç”¨ä¾‹"
enum Color {
  Red,
  Green,
  Blue,
}
const c: Color = Color.Green;
```

```ts 2 title="æšä¸¾" subtitle="é»˜è®¤æƒ…å†µä¸‹ï¼Œä»0å¼€å§‹ä¸ºå…ƒç´ ç¼–å·ã€‚ ä½ ä¹Ÿå¯ä»¥æ‰‹åŠ¨çš„æŒ‡å®šæˆå‘˜çš„æ•°å€¼"
enum Color {
  Red = 1,
  Green,
  Blue,
}
const c: Color = Color.Green;
```

```ts 2,3,4 title="æšä¸¾" subtitle="å…¨éƒ¨éƒ½é‡‡ç”¨æ‰‹åŠ¨èµ‹å€¼"
enum Color {
  Red = 1,
  Green = 2,
  Blue = 4,
}
const c: Color = Color.Green;
```

```ts 8 title="æšä¸¾" subtitle="è¾“å‡ºä»€ä¹ˆï¼Ÿ"
enum Color {
  Red = 1,
  Green,
  Blue,
}
let colorName: string = Color[2];

console.log(colorName);
```

```ts 8 title="æšä¸¾" subtitle="è¾“å‡º'Green',å› ä¸ºä»æšä¸¾æ¥çœ‹ï¼ŒRedå€¼ä¸º1ï¼ŒGreenå€¼ä¸º2ï¼ŒBlueå€¼ä¸º3"
enum Color {
  Red = 1,
  Green,
  Blue,
}
let colorName: string = Color[2];

console.log(colorName);
```

</CodeSurferLayout>

---

<CodeSurferLayout>

```ts 1,3,4,6,7,8,9 title="å¯¹è±¡" subtitle="object è¡¨ç¤ºéåŸå§‹ç±»å‹ï¼Œä¹Ÿå°±æ˜¯é™¤ numberï¼Œstringï¼Œbooleanï¼Œsymbolï¼Œnull æˆ– undefined ä¹‹å¤–çš„ç±»å‹ã€‚"
declare function create(o: object | null): void;

create({ prop: 0 }); // OK
create(null); // OK

create(42); // Error
create('string'); // Error
create(false); // Error
create(undefined); // Error
```

</CodeSurferLayout>

---

<CodeSurferLayout>

```ts 3 title="ç±»å‹æ–­è¨€" subtitle="æ–¹å¼ä¸€ï¼š"å°–æ‹¬å·"è¯­æ³•"
const someValue: any = 'this is a string';

const strLength: number = (<string>someValue).length;
```

```ts 3 title="ç±»å‹æ–­è¨€" subtitle="æ–¹å¼äºŒï¼šasè¯­æ³•"
const someValue: any = 'this is a string';

const strLength: number = (someValue as string).length;
```

</CodeSurferLayout>

---

ä»¥ä¸Šä¸¤ç§ç±»å‹æ–­è¨€çš„å½¢å¼æ˜¯ç­‰ä»·çš„ï¼Œè‡³äºç”¨å“ªä¸ªï¼Œå¤§éƒ¨åˆ†æ—¶å€™çœ‹ä¸ªäººå–œå¥½ã€‚

ä½†æ˜¯ï¼Œå½“åœ¨ TypeScript é‡Œä½¿ç”¨åˆ° JSX æ—¶ï¼Œå¿…é¡»ä½¿ç”¨ as è¯­æ³•å½¢å¼çš„æ–­è¨€ã€‚

---

ts éç©ºæ–­è¨€å…³é”®å­—(!)

!å’Œ?æ˜¯ç›¸å¯¹çš„ï¼Œè¡¨ç¤ºå¼ºåˆ¶è§£æï¼ˆä¹Ÿå°±æ˜¯å‘Šè¯‰ typescript ç¼–è¯‘å™¨ï¼Œè¿™é‡Œä¸€å®šæœ‰å€¼ï¼‰

---

<CodeSurferLayout>

```ts 3 subtitle="tslintæ£€æŸ¥ä¼šæŠ¥é”™ï¼ŒåŸå› æ˜¯elementå¯èƒ½ä¸ºnull"
const element = document.querySelector('.item');

console.log(element.getBoundingClientRect());

console.log(element!.getBoundingClientRect());
```

```ts 5 subtitle="å¦‚æœæŸä¸ªå˜é‡çš„ç±»å‹ä¸ºXxx | null | undefinedï¼Œä½†æ˜¯ä½ ç¡®å®šåœ¨ç”¨è¿™ä¸ªå˜é‡æ—¶å®ƒè‚¯å®šæœ‰å€¼ï¼Œé‚£ä¹ˆä½ å¯ä»¥ä½¿ç”¨!æ¥å‘Šè¯‰ TypeScript è¿™ä¸ªå˜é‡ä¸å¯èƒ½ä¸ºnullæˆ–undefinedã€‚"
const element = document.querySelector('.item');

console.log(element.getBoundingClientRect());

console.log(element!.getBoundingClientRect());
```

</CodeSurferLayout>

---

<CodeSurferLayout>

```ts 1,2,3 title="æ¥å£" subtitle="æ¥å£å¯ä»¥ä¸ºå¯¹è±¡å®šä¹‰ç»“æ„ä¿¡æ¯"
interface Props {
  userName: string;
}

function Hello(props: Props) {
  return <div>Hello, {props.userName}</div>;
}
```

```ts 1,2,3 title="å¯é€‰å±æ€§" subtitle="é»˜è®¤æƒ…å†µä¸‹ï¼Œæ¥å£ä¸­çš„å±æ€§æ˜¯å¿…é¡»çš„ï¼Œä¸æŒ‡å®šåˆ™ä¼šæç¤ºé”™è¯¯ã€‚å¦‚æœå±æ€§ä¸æ˜¯å¿…éœ€çš„ï¼Œåˆ™å¯ä»¥ç”¨?å£°æ˜å±æ€§ä¸ºå¯é€‰å±æ€§"
interface SquareConfig {
  color?: string;
  width?: number;
}

function createSquare(config: SquareConfig): { color: string; area: number } {
  let newSquare = { color: 'white', area: 100 };
  if (config.color) {
    newSquare.color = config.color;
  }
  if (config.width) {
    newSquare.area = config.width * config.width;
  }
  return newSquare;
}

let mySquare = createSquare({ color: 'black' });
```

```ts title="åªè¯»å±æ€§" subtitle="ä¸€äº›å¯¹è±¡å±æ€§åªèƒ½åœ¨å¯¹è±¡åˆšåˆšåˆ›å»ºçš„æ—¶å€™ä¿®æ”¹å…¶å€¼ã€‚ ä½ å¯ä»¥åœ¨å±æ€§åå‰ç”¨ readonlyæ¥æŒ‡å®šåªè¯»å±æ€§"
interface Point {
  readonly x: number;
  readonly y: number;
}
```

```ts 1 title="åªè¯»å±æ€§" subtitle="ä½ å¯ä»¥é€šè¿‡èµ‹å€¼ä¸€ä¸ªå¯¹è±¡å­—é¢é‡æ¥æ„é€ ä¸€ä¸ªPointã€‚ "
let p1: Point = { x: 10, y: 20 };

p1.x = 5; // error!
```

```ts 3 title="åªè¯»å±æ€§" subtitle=" èµ‹å€¼åï¼Œ xå’Œyå†ä¹Ÿä¸èƒ½è¢«æ”¹å˜äº†"
let p1: Point = { x: 10, y: 20 };

p1.x = 5; // error!
```

</CodeSurferLayout>

---

## å‡½æ•°

---

<CodeSurferLayout>

```js
function add(x, y) {
  return x + y;
}
```

```js 1:3 subtitle="javascript"
function add(x, y) {
  return x + y;
}
```

```ts 1:3 subtitle="typescripot"
function add(x: number, y: number): number {
  return x + y;
}
```

```ts 1 subtitle="ç»™å‡½æ•°å‚æ•°å’Œè¿”å›å€¼èµ‹å€¼"
function add(x: number, y: number): number {
  return x + y;
}
```

```ts
add(1, 2); // OK
add(1, '2'); // error
```

```ts 2 subtitle="tsé”™è¯¯æç¤ºï¼š""2"ä¸èƒ½èµ‹ç»™ç±»å‹â€œnumberâ€çš„å‚æ•°ã€‚"
add(1, 2); // OK
add(1, '2'); // error
```

</CodeSurferLayout>

---

### å‡½æ•°ç±»å‹

å‡½æ•°ä½œä¸ºå€¼ä¼ é€’æ—¶çš„ç±»å‹å£°æ˜ã€‚

---

<CodeSurferLayout>

```ts
function calc(
  x: number,
  y: number,
  calcFn: ???,
): number {
  return calcFn(x, y);
}
```

```ts 4 subtitle="calcFnçš„ç±»å‹æ€ä¹ˆå£°æ˜ï¼Ÿ"
function calc(
  x: number,
  y: number,
  calcFn: ???,
): number {
  return calcFn(x, y);
}
```

```ts 4
function calc(
  x: number,
  y: number,
  calcFn: (x: number, y: number) => number,
): number {
  return calcFn(x, y);
}
```

```ts 1:5
function add(x: number, y: number): number {
  return x + y;
}

calc(1, 2, add); // ok
```

```ts 1:5
function pow(x: number, y: number): number {
  return x ** y;
}

calc(1, 2, pow); // ok
```

```ts 1:5
function divide(x: number, y: number): number {
  return x / y;
}

calc(2, 1, divide); // ok
```

```ts 1:5
function sum(x: number, y: number, z: number): number {
  return x + y + z;
}

calc(1, 2, sum); // error
```

</CodeSurferLayout>

---

### åœ¨æ¥å£ä¸­å®šä¹‰å‡½æ•°ç±»å‹çš„å‚æ•°

---

<CodeSurferLayout>

```ts 1:6 title="æ–¹å¼ä¸€"
interface Point {
  readonly x: number;
  readonly y: number;

  distinct(anotherPoint: Point): number;
}
```

```ts 1:6 title="æ–¹å¼ä¸€" subtitle="æ¨èæ–¹å¼"
interface Point {
  readonly x: number;
  readonly y: number;

  distinct(anotherPoint: Point): number;
}
```

```ts 1:6 title="æ–¹å¼äºŒ"
interface Point {
  readonly x: number;
  readonly y: number;

  distinct: (anotherPoint: Point) => number;
}
```

</CodeSurferLayout>

---

### å¯é€‰çš„å‡½æ•°å‚æ•°

---

<CodeSurferLayout>

```ts
function buildName(firstName: string, lastName?: string) {
  return firstName + lastName;
}
```

```ts 1 subtitle="å‚æ•°åé¢æ·»åŠ ?ï¼Œè¡¨ç¤ºè¯¥å‚æ•°å¯é€‰"
function buildName(firstName: string, lastName?: string) {
  return firstName + lastName;
}
```

```ts
buildName('Bob'); // ok
buildName('Bob', 'Alias'); // ok
buildName('Bob', 'Alias', 'Axx'); // error
```

```ts 1 subtitle="æœ‰é—®é¢˜ä¹ˆï¼Ÿ"
function buildName(firstName?: string, lastName: string) {
  return firstName + lastName;
}
```

```ts 1 subtitle="å¯é€‰å‚æ•°å¿…é¡»åœ¨å¿…é¡»å‚æ•°ä¹‹å"
function buildName(firstName?: string, lastName: string) {
  return firstName + lastName;
}
```

```ts 1
function buildName(firstName: string | undefined, lastName: string) {
  return firstName + lastName;
}
```

```ts 1 subtitle="ä¸€ä¸ªå‡½æ•°å¯ä»¥æœ‰å¤šä¸ªå¯é€‰å‚æ•°"
function buildName(firstName?: string, lastName?: string) {
  return firstName + lastName;
}
```

```ts 1:4 subtitle="lastName?: stringç­‰ä»·äºlastName: string | undefined"
function buildName(
  firstName: string | undefined,
  lastName: string | undefined,
) {
  return firstName + lastName;
}
```

</CodeSurferLayout>

---

### å‡½æ•°å‚æ•°é»˜è®¤å€¼

å¯ä»¥ä¸ºå¯é€‰å‚æ•°æ·»åŠ ä¸Šé»˜è®¤å€¼ã€‚è¿™æ ·ï¼Œè°ƒç”¨å‡½æ•°æ—¶ï¼Œå¦‚æœè¯¥å‡½æ•°å‚æ•°ä¸º`undefined`ï¼Œåˆ™è¯¥å‚æ•°ä¸ºé»˜è®¤å€¼ã€‚

---

<CodeSurferLayout>

```ts
function buildName(firstName: string, lastName: string = 'Smith') {
  return firstName + lastName;
}

const result1 = buildName('Bob'); // OK, result1 = Bob Smith
const result2 = buildName('Bob', 'Adams'); // OK, result2 = Bob Adams
```

</CodeSurferLayout>

---

## ç±»

---

<CodeSurferLayout>

```ts
class Animal {
  name: string;

  constructor(theName: string) {
    this.name = theName;
  }

  move(distanceInMeters: number) {
    alert(this.name + 'moved' + distanceInMeters + 'm');
  }
}

const animal = new Animal('Kiki');
```

```ts 2 subtitle="ç»™ç±»çš„æˆå‘˜å±æ€§æ·»åŠ ç±»å‹"
class Animal {
  name: string;

  constructor(theName: string) {
    this.name = theName;
  }

  move(distanceInMeters: number) {
    alert(this.name + 'moved' + distanceInMeters + 'm');
  }
}

const animal = new Animal('Kiki');
```

```ts 4 subtitle="ç»™æ„é€ å‡½æ•°å‚æ•°æ·»åŠ ç±»å‹"
class Animal {
  name: string;

  constructor(theName: string) {
    this.name = theName;
  }

  move(distanceInMeters: number) {
    alert(this.name + 'moved' + distanceInMeters + 'm');
  }
}

const animal = new Animal('Kiki');
```

```ts 8 subtitle="ç»™ç±»çš„æˆå‘˜æ–¹æ³•æ·»åŠ ç±»å‹å£°æ˜"
class Animal {
  name: string;

  constructor(theName: string) {
    this.name = theName;
  }

  move(distanceInMeters: number) {
    alert(this.name + 'moved' + distanceInMeters + 'm');
  }
}

const animal = new Animal('Kiki');
```

</CodeSurferLayout>

---

<CodeSurferLayout>

```ts title="public ä¿®é¥°ç¬¦" subtitle="åœ¨TypeScripté‡Œï¼Œæˆå‘˜éƒ½é»˜è®¤ä¸ºpublicã€‚ä¹Ÿå¯ä»¥æ˜ç¡®çš„å°†ä¸€ä¸ªæˆå‘˜æ ‡è®°æˆ public"
class Animal {
  public name: string;
  public constructor(theName: string) {
    this.name = theName;
  }
  public move(distanceInMeters: number) {
    alert(this.name + 'moved' + distanceInMeters + 'm');
  }
}
```

</CodeSurferLayout>

---

<CodeSurferLayout>

```ts 2,8 title="private ä¿®é¥°ç¬¦" subtitle="å½“æˆå‘˜è¢«æ ‡è®°æˆ privateæ—¶ï¼Œå®ƒå°±ä¸èƒ½åœ¨å£°æ˜å®ƒçš„ç±»çš„å¤–éƒ¨è®¿é—®"
class Animal {
  private name: string;
  constructor(theName: string) {
    this.name = theName;
  }
}

new Animal('Cat').name; // é”™è¯¯: 'name' æ˜¯ç§æœ‰çš„.
```

</CodeSurferLayout>

---

<CodeSurferLayout>

```ts  title="protected ä¿®é¥°ç¬¦" subtitle="protectedä¿®é¥°ç¬¦ä¸ privateä¿®é¥°ç¬¦çš„è¡Œä¸ºå¾ˆç›¸ä¼¼ï¼Œä½†æœ‰ä¸€ç‚¹ä¸åŒï¼Œ protectedæˆå‘˜åœ¨æ´¾ç”Ÿç±»ä¸­ä»ç„¶å¯ä»¥è®¿é—®"
class Person {
  protected name: string;
  constructor(name: string) {
    this.name = name;
  }
}

class Employee extends Person {
  private department: string;

  constructor(name: string, department: string) {
    super(name);
    this.department = department;
  }

  public getElevatorPitch() {
    return (
      'Hello, my name is' + this.name + 'and I work in' + this.department + '.'
    );
  }
}

let howard = new Employee('Howard', 'Sales');
```

```ts 2,25 title="protected ä¿®é¥°ç¬¦" subtitle="é”™è¯¯æˆ‘ä»¬ä¸èƒ½åœ¨ Personç±»å¤–ä½¿ç”¨ name"
class Person {
  protected name: string;
  constructor(name: string) {
    this.name = name;
  }
}

class Employee extends Person {
  private department: string;

  constructor(name: string, department: string) {
    super(name);
    this.department = department;
  }

  public getElevatorPitch() {
    return (
      'Hello, my name is' + this.name + 'and I work in' + this.department + '.'
    );
  }
}

let howard = new Employee('Howard', 'Sales');
console.log(howard.getElevatorPitch());
console.log(howard.name); // é”™è¯¯æˆ‘ä»¬ä¸èƒ½åœ¨ Personç±»å¤–ä½¿ç”¨ name
```

```ts 2,24 title="protected ä¿®é¥°ç¬¦" subtitle="æˆ‘ä»¬ä»ç„¶å¯ä»¥é€šè¿‡ Employeeç±»çš„å®ä¾‹æ–¹æ³•è®¿é—®ï¼Œå› ä¸º Employeeæ˜¯ç”± Personæ´¾ç”Ÿè€Œæ¥"
class Person {
  protected name: string;
  constructor(name: string) {
    this.name = name;
  }
}

class Employee extends Person {
  private department: string;

  constructor(name: string, department: string) {
    super(name);
    this.department = department;
  }

  public getElevatorPitch() {
    return (
      'Hello, my name is' + this.name + 'and I work in' + this.department + '.'
    );
  }
}

let howard = new Employee('Howard', 'Sales');
console.log(howard.getElevatorPitch());
```

```ts 3,9,24 title="protected ä¿®é¥°ç¬¦" subtitle="æ„é€ å‡½æ•°ä¹Ÿå¯ä»¥è¢«æ ‡è®°æˆ protectedã€‚ è¿™æ„å‘³ç€è¿™ä¸ªç±»ä¸èƒ½åœ¨åŒ…å«å®ƒçš„ç±»å¤–è¢«å®ä¾‹åŒ–ï¼Œä½†æ˜¯èƒ½è¢«ç»§æ‰¿"
class Person {
  protected name: string;
  protected constructor(theName: string) {
    this.name = theName;
  }
}

// Employee èƒ½å¤Ÿç»§æ‰¿ Person
class Employee extends Person {
  private department: string;

  constructor(name: string, department: string) {
    super(name);
    this.department = department;
  }

  public getElevatorPitch() {
    return (
      'Hello, my name is' + this.name + 'and I work in' + this.department + '.'
    );
  }
}

let howard = new Employee('Howard', 'Sales');
let john = new Person('John'); // é”™è¯¯: 'Person' çš„æ„é€ å‡½æ•°æ˜¯è¢«ä¿æŠ¤çš„.
```

</CodeSurferLayout>

---

ç±»å‹æ¨è®º

å¯¹äºèƒ½å¤Ÿæ˜¾è€Œæ˜“è§çš„æ¨æ–­å‡ºå˜é‡ç±»å‹çš„ï¼ŒTypeScript å…è®¸æˆ‘ä»¬çœç•¥ç±»å‹å£°æ˜ï¼Œè¿™å°±æ˜¯ç±»å‹æ¨è®º

---

<CodeSurferLayout>

```ts title="ç±»å‹æ¨è®º"
let x: number = 0;

x = 1; // OK
x = '1'; // error
```

```ts 1 title="ç±»å‹æ¨è®º" subtitle="xè¢«èµ‹å€¼ä¸º0ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¸€èˆ¬ä¼šæ¨æµ‹å®ƒçš„ç±»å‹ä¸ºnumberã€‚å¯¹äºè¿™ç§æ˜¾è€Œæ˜“è§çš„ç±»å‹ï¼ŒTypeScript å…è®¸æˆ‘ä»¬çœç•¥ç±»å‹å£°æ˜"
let x = 0;

x = 1; // OK
x = '1'; // error
```

```jsx 1:10
const x = [0, 1, null];
const zoo = [new Rhino(), new Elephant(), new Snake()];

<button
  onClick={(event) => {
    console.log(event);
  }}
>
  ç‚¹å‡»æˆ‘
</button>;
```

```jsx 1 title="ç±»å‹æ¨è®º" subtitle="xçš„ç±»å‹æ¨æ–­ä¸ºï¼š(number | null)[]"
const x = [0, 1, null];
const zoo = [new Rhino(), new Elephant(), new Snake()];

<button
  onClick={(event) => {
    console.log(event);
  }}
>
  ç‚¹å‡»æˆ‘
</button>;
```

```jsx 2 title="ç±»å‹æ¨è®º" subtitle="zooç±»å‹æ¨æ–­ä¸ºï¼š(Rhino | Elephant | Snake)[]"
const x = [0, 1, null];
const zoo = [new Rhino(), new Elephant(), new Snake()];

<button
  onClick={(event) => {
    console.log(event);
  }}
>
  ç‚¹å‡»æˆ‘
</button>;
```

```jsx 5:7 title="ç±»å‹æ¨è®º" subtitle="eventç±»å‹æ¨æ–­ä¸ºï¼šReact.MouseEvent<HTMLButtonElement>"
const x = [0, 1, null];
const zoo = [new Rhino(), new Elephant(), new Snake()];

<button
  onClick={(event) => {
    console.log(event);
  }}
>
  ç‚¹å‡»æˆ‘
</button>;
```

</CodeSurferLayout>

---

## æ³›å‹

<Appear>
  <span>ç±»å‹å‚æ•°åŒ–ã€‚</span>
</Appear>

---

<CodeSurferLayout>

```typescript
const items: Array<number> = [1, 2, 3];
const names: Array<string> = ['å¼ ä¸‰', 'æå››', 'ç‹äº”'];
```

```typescript 1 subtitle="Array<number>ï¼šæ•°å­—æ•°ç»„"
const items: Array<number> = [1, 2, 3];
const names: Array<string> = ['å¼ ä¸‰', 'æå››', 'ç‹äº”'];
```

```typescript 2 subtitle="Array<string>ï¼šå­—ç¬¦ä¸²æ•°ç»„"
const items: Array<number> = [1, 2, 3];
const names: Array<string> = ['å¼ ä¸‰', 'æå››', 'ç‹äº”'];
```

```typescript 1:2 subtitle="éƒ½æ˜¯æ•°ç»„ï¼Œä½†æ˜¯é€šè¿‡<number>ã€<string>æŒ‡å®šäº†æ•°ç»„å…ƒç´ ç±»å‹"
const items: Array<number> = [1, 2, 3];
const names: Array<string> = ['å¼ ä¸‰', 'æå››', 'ç‹äº”'];
```

```typescript 1:2 subtitle="è¿™å°±æ˜¯æ³›å‹"
const items: Array<number> = [1, 2, 3];
const names: Array<string> = ['å¼ ä¸‰', 'æå››', 'ç‹äº”'];
```

</CodeSurferLayout>

---

### å£°æ˜ç±»å‹å˜é‡

---

<CodeSurferLayout>

```typescript
function createArray(length: number, value: any): any[] {
  return new Array(length).fill(value);
}
```

```typescript 1 subtitle="any[]ä¸æ˜¯æˆ‘ä»¬æœŸæœ›çš„è¿”å›å€¼ç±»å‹"
function createArray(length: number, value: any): any[] {
  return new Array(length).fill(value);
}
```

```typescript 1 subtitle="å¦‚æœvalueæ˜¯stringç±»å‹çš„ï¼ŒæœŸæœ›è¿”å›å€¼ç±»å‹æ˜¯string[]"
function createArray(length: number, value: string): string[] {
  return new Array(length).fill(value);
}
```

```typescript 1 subtitle="å¦‚æœvalueæ˜¯booleanç±»å‹çš„ï¼ŒæœŸæœ›è¿”å›å€¼ç±»å‹æ˜¯boolean[]"
function createArray(length: number, value: boolean): boolean[] {
  return new Array(length).fill(value);
}
```

```typescript 1 subtitle="å¦‚æœvalueæ˜¯Dateç±»å‹çš„ï¼ŒæœŸæœ›è¿”å›å€¼ç±»å‹æ˜¯Date[]"
function createArray(length: number, value: Date): Date[] {
  return new Array(length).fill(value);
}
```

```typescript 1 subtitle="æˆ‘ä»¬ä½¿ç”¨ä¸€ä¸ªç±»å‹å˜é‡Tï¼Œæ¥ä»£è¡¨valueçš„ç±»å‹"
function createArray(length: number, value: T): T[] {
  return new Array(length).fill(value);
}
```

```typescript 1 subtitle="é‚£ä¹ˆè¿”å›å€¼çš„ç±»å‹å°±æ˜¯T[]"
function createArray(length: number, value: T): T[] {
  return new Array(length).fill(value);
}
```

```typescript 1 subtitle="ä¸å˜é‡ä¸€æ ·ï¼Œåœ¨ä½¿ç”¨ç±»å‹å˜é‡ä¹‹å‰ï¼Œç±»å‹å˜é‡ä¹Ÿéœ€è¦å£°æ˜"
function createArray<T>(length: number, value: T): T[] {
  return new Array(length).fill(value);
}
```

```typescript 1 subtitle="ä½¿ç”¨äº†ç±»å‹å˜é‡çš„å‡½æ•°ï¼Œç§°ä¹‹ä¸ºæ³›å‹å‡½æ•°"
function createArray<T>(length: number, value: T): T[] {
  return new Array(length).fill(value);
}
```

</CodeSurferLayout>

---

### ç»™ç±»å‹å˜é‡èµ‹â€œå€¼â€

<Appear>
  <p>è°ƒç”¨æ³›å‹å‡½æ•°ï¼Œéœ€è¦ç»™ç±»å‹å˜é‡èµ‹â€œå€¼â€</p>
  <p>è¿™ä¸ªâ€œå€¼â€æŒ‡ç±»å‹ï¼Œè€Œéåƒ1, '2', trueè¿™æ ·çš„çœŸå®å€¼</p>
</Appear>

---

<CodeSurferLayout>

```typescript
const items = createArray<number>(3, 1);
const strs = createArray<string>(3, '');
```

```typescript 1 subtitle="<number>ç»™å˜é‡ç±»å‹Tèµ‹å€¼number"
const items = createArray<number>(3, 1);
const strs = createArray<string>(3, '');
```

```typescript 2 subtitle="<string>ç»™å˜é‡ç±»å‹Tèµ‹å€¼string"
const items = createArray<number>(3, 1);
const strs = createArray<string>(3, '');
```

</CodeSurferLayout>

---

### æ³›å‹çš„ç±»å‹æ¨è®º

---

<CodeSurferLayout>

```typescript 1 subtitle="value = 1"
const items = createArray<number>(3, 1);
const strs = createArray<string>(3, '');
```

```typescript 1 subtitle="value = 1 ==> value: number"
const items = createArray<number>(3, 1);
const strs = createArray<string>(3, '');
```

```typescript 1 subtitle="value = 1 ==> value: number ==> T = number"
const items = createArray<number>(3, 1);
const strs = createArray<string>(3, '');
```

```typescript 1 subtitle="åº”ç”¨ç±»å‹æ¨è®ºè§„åˆ™ï¼Œå¯ä»¥çœç•¥æ‰ç»™Tçš„èµ‹å€¼<number>"
const items = createArray(3, 1);
const strs = createArray<string>(3, '');
```

```typescript 2 subtitle="value = '' ==> value: string ==> T = string"
const items = createArray(3, 1);
const strs = createArray<string>(3, '');
```

```typescript 2 subtitle="çœç•¥æ‰<string>"
const items = createArray(3, 1);
const strs = createArray(3, '');
```

</CodeSurferLayout>

---

### æ³›å‹æ¥å£

---

<CodeSurferLayout>

```typescript
interface List<T> {
  length: number;
  items: T[];
  get(index: number): T;
}

const items: List<number> = {
  length: 3,
  items: [1, 2, 3],
  get(index: number) {
    return this.items[index];
  },
};
```

</CodeSurferLayout>

---

<CodeSurferLayout>

```typescript
class List<T> {
  public items: T[];

  public constructor(items: T[]) {
    this.items = items;
  }

  public get length() {
    return this.items.length;
  }

  public getItem(index: number): T {
    return this.items[index];
  }
}

const items = new List<number>([1, 2, 3]);
```

```typescript 17 subtitle="åˆä¸€ä¸ªå¯ä»¥åº”ç”¨ç±»å‹æ¨è®ºçš„åœ°æ–¹"
class List<T> {
  public items: T[];

  public constructor(items: T[]) {
    this.items = items;
  }

  public get length() {
    return this.items.length;
  }

  public getItem(index: number): T {
    return this.items[index];
  }
}

const items = new List<number>([1, 2, 3]);
```

```typescript 17 subtitle="items = [1, 2, 3] ==> items: number[] ==> T = number"
class List<T> {
  public items: T[];

  public constructor(items: T[]) {
    this.items = items;
  }

  public get length() {
    return this.items.length;
  }

  public getItem(index: number): T {
    return this.items[index];
  }
}

const items = new List<number>([1, 2, 3]);
```

```typescript 17 subtitle="çœç•¥æ‰<number>"
class List<T> {
  public items: T[];

  public constructor(items: T[]) {
    this.items = items;
  }

  public get length() {
    return this.items.length;
  }

  public getItem(index: number): T {
    return this.items[index];
  }
}

const items = new List([1, 2, 3]);
```

</CodeSurferLayout>

---

### æ³›å‹çº¦æŸ

<Appear>
  <p>è§„å®šæ³›å‹å¿…é¡»éµå¾ªçš„è§„åˆ™ã€‚</p>
  <p>
    ä½¿ç”¨<strong>extends</strong>å…³é”®å­—æ·»åŠ æ³›å‹çº¦æŸã€‚
  </p>
</Appear>

---

<CodeSurferLayout>

```typescript
interface Lengthwise {
  length: number;
}

function loggingIdentity<T extends Lengthwise>(arg: T): T {
  console.log(arg.length); // ok
  return arg;
}
```

```typescript 5 subtitle="Tå¿…é¡»æœ‰length: numberå±æ€§"
interface Lengthwise {
  length: number;
}

function loggingIdentity<T extends Lengthwise>(arg: T): T {
  console.log(arg.length); // ok
  return arg;
}
```

```typescript 6 subtitle="argæ˜¯Tç±»å‹çš„ï¼Œæ‰€ä»¥å®ƒæœ‰lengthå±æ€§"
interface Lengthwise {
  length: number;
}

function loggingIdentity<T extends Lengthwise>(arg: T): T {
  console.log(arg.length); // ok
  return arg;
}
```

```typescript 1:3
loggingIdentity(3); // error

loggingIdentity({ length: 10, value: 3 }); // OK
```

</CodeSurferLayout>

---

### æ³›å‹å‚æ•°é»˜è®¤å€¼

é€šè¿‡`<T = é»˜è®¤ç±»å‹>`ä¸ºæ³›å‹æŒ‡å®šé»˜è®¤çš„ç±»å‹

---

<CodeSurferLayout>

```typescript
function getItemElements<T extends Element = HTMLDivElement>(): NodeListOf<T> {
  return document.querySelectorAll<T>('.item');
}
```

</CodeSurferLayout>

---

## é«˜çº§ç±»å‹

---

### ç±»å‹åˆ«å

`type AnotherTypeName = string | number | null`

---

### ç›¸äº¤ç±»å‹

<Appear>
  <p>T0 = T1 & T2 ===> T0æ—¢æ˜¯T1åˆæ˜¯T2</p>
  <p>T0 = T1 & T2 ===> T0åŒ…å«æ‰€æœ‰T1å’ŒT2å®šä¹‰çš„å±æ€§</p>
</Appear>

---

<CodeSurferLayout>

```typescript
// äºŒç»´ç‚¹
interface Point {
  readonly x: number;
  readonly y: number;
}

// ç¬¬ä¸‰ç»´åº¦åæ ‡
interface ZCoordinate {
  readonly z: number;
}

// ä¸‰ç»´ç‚¹
type ThreeDimensionalPoint = Point & ZCoordinate;

/*
ThreeDimensionalPointç›¸å½“äºï¼š

{
  readonly x: number;
  readonly y: number;
  readonly z: number;
}
*/
```

</CodeSurferLayout>

---

### è”åˆç±»å‹

<Appear>
  <p>T0 = T1 | T2 | T3 ===> T0åªèƒ½æ˜¯T1ã€T2ã€T3ä¸‰è€…ä¹‹ä¸€</p>
</Appear>

---

<CodeSurferLayout>

```typescript
let item: string | number | undefined;

item = '1'; // OK
item = undefined; // OK
item = 1; // OK
item = false; // error
item = null; // error
```

</CodeSurferLayout>

---

è°¢è°¢ï¼ï¼ï¼ï¼

:clap::clap::clap:

ğŸ‰ğŸ‰ğŸ‰
